/*! bespoke-multimedia v1.0.4-dev Â© 2016 Dan Allen, MIT License */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t=t.bespoke||(t.bespoke={}),t=t.plugins||(t.plugins={}),t.multimedia=e()}}(function(){return function e(t,n,o){function i(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(r)return r(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){t.exports=function(){return function(e){var t=/\/\/player\.vimeo\.com\//,n=/\/\/www\.youtube\.com\/embed\//,o="command",i="file:"===location.protocol,r=function(e,t){e.contentWindow.postMessage(JSON.stringify(t),"*")},a=function(e,t,n){for(var o=[],i=t.querySelectorAll(e+(n||"")),r=i.length;r--;o[r]=i[r]);return o},u=function(e){var a=e.hasAttribute("data-rewind"),u=Math.max(Math.min(parseFloat(e.getAttribute("data-volume")),10),0);if(e.play)a&&(e.currentTime=0),isNaN(u)||(e.volume=u/10),e.paused&&e.play();else if(n.test(e.src))a&&r(e,{event:o,func:"seekTo",args:[0]}),isNaN(u)||r(e,{event:o,func:"setVolume",args:[10*u]}),r(e,{event:o,func:"playVideo"});else if(t.test(e.src)){if(i)return console.warn("WARNING: Cannot play Vimeo video when deck is loaded via file://.");a&&r(e,{method:"seekTo",value:0}),isNaN(u)||r(e,{method:"setVolume",value:u/10}),r(e,{method:"play"})}},s=function(e){e.pause?e.pause():n.test(e.src)?r(e,{event:o,func:"pauseVideo"}):!i&&t.test(e.src)&&r(e,{method:"pause"})},f=function(e,t){e[t||"src"]=e.getAttribute(t||"src")},c=function(e,t){e.contentDocument.documentElement.classList[t||"add"]("active")},d=function(t){t.hasAttribute("data-reload")?f(t,"data"):"svg"===t.contentDocument.documentElement.tagName?c(t):t.addEventListener("load",function n(){this.removeEventListener(n,!1),e.slides[e.slide()].contains(this)&&c(this)},!1)},l=function(e){c(e,"remove")},m=a.bind(null,"audio,video,iframe"),p=a.bind(null,'img[src$=".gif"][data-reload]'),v=a.bind(null,'object[type="image/svg+xml"]'),h=function(e){m(e).forEach(u)},g=function(e){m(e).forEach(s)},y=function(e){p(e).forEach(f)},b=function(e){v(e).forEach(d)},w=function(e){v(e,":not([data-reload])").forEach(l)},N=function(e){return e.preview?g(e.slide):(h(e.slide),b(e.slide),void y(e.slide))},E=function(e){g(e.slide),w(e.slide)};e.on("activate",N),e.on("deactivate",E)}}},{}]},{},[1])(1)});